 
document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("notificationButton"),t=document.getElementById("notificationList");e.addEventListener("mouseover",()=>{fetch("/notification-of-user").then(e=>e.json()).then(e=>{t.innerHTML="",e.forEach(e=>{let n=document.createElement("li"),o=new Intl.DateTimeFormat('en-US',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:!1}).format(new Date(e.timestamp));n.innerHTML=`${e.message} at ${o}`,t.appendChild(n)})}).catch(e=>{console.error("Error fetching notifications:",e),t.innerHTML="<li>Error fetching notifications</li>"})})});const sidebarLinks=document.querySelectorAll(".sidebar a");sidebarLinks.forEach(e=>{e.addEventListener("click",function(){sidebarLinks.forEach(e=>{e.classList.remove("active")}),this.classList.add("active")})});let i=0;var txt="World's Best NoBrokerage Property Site..made by YASH",speed=50;function typeWriter(){i<txt.length&&(document.getElementById("statement").innerHTML+=txt.charAt(i),i++,setTimeout(typeWriter,speed))}function openModal(){document.getElementById("myModal").style.display="flex"}typeWriter();const openModalLinks=document.querySelectorAll(".openModalLink");function openReg(){document.getElementById("myModals").style.display="flex"}openModalLinks.forEach(e=>{e.addEventListener("click",()=>{openModal()})});const openModalLinksReg=document.querySelectorAll(".openModalLinkReg");openModalLinksReg.forEach(e=>{e.addEventListener("click",()=>{openReg()})}),window.addEventListener("click",function(e){var t=document.getElementById("myModal");e.target==t&&(t.style.display="none")}),window.addEventListener("click",function(e){var t=document.getElementById("myModals");e.target==t&&(t.style.display="none")}),document.getElementById("sendOTP").addEventListener("click",async function(){let e=document.getElementById("imput-ur").value;console.log(e),fetch("/send-email-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(e=>{if(!e.ok)throw Error("Error sending OTP");return e.text()}).then(e=>{console.log(e),console.log("otp sent"),document.getElementById("sendOTP").innerHTML="otp sucessfully sent",document.getElementById("otpField").style.display="block",document.getElementById("verifyOTP").style.display="block"}).catch(e=>{console.error("Error:",e),alert("Error sending OTP please ensure correct email")})}),document.getElementById("verifyOTP").addEventListener("click",async()=>{let e=document.getElementById("imput-ur").value,t=document.getElementById("imput-otpr").value;try{let n=await fetch("/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,otp:t})}),l=await n.json();if(l.success){document.getElementById("funNAme").disabled=!1,document.getElementById("verifyOTP").innerHTML="OTP Verified",document.getElementById("otpField").style.display="none",document.getElementById("sendOTP").style.display="none",document.getElementById("imput-otp").style.display="none";let s=document.getElementById("verifyOTP");setTimeout(()=>{s.style.display="none"},1e3)}else alert("Incorrect OTP. Please try again.")}catch(o){console.log(o)}});const pincodeBtn=document.getElementById("getCity");pincodeBtn.addEventListener("click",()=>{let e=document.getElementById("enterPincode").value;fetch(`https://api.postalpincode.in/pincode/${e}/`).then(e=>e.json()).then(e=>{console.log(e[0].Status);let t=document.getElementById("your-city");"Success"===e[0].Status?t.innerHTML=e[0].PostOffice[0].Block:t.innerHTML="Enter valid pincode"})});const rentOrSell=document.querySelectorAll(".Stype");let selectedRentOrSell="",selectedCommRes="";rentOrSell.forEach(e=>{e.addEventListener("click",function(){rentOrSell.forEach(e=>{e.classList.remove("active-type")}),this.classList.add("active-type"),selectedRentOrSell=this.innerText})});const commRes=document.querySelectorAll(".land-typeCR");function viewPass(){let e=document.getElementById("imput-p");"password"===e.type?e.type="text":e.type="password";let t=document.getElementById("imput-cnf");"password"===t.type?t.type="text":t.type="password"}commRes.forEach(e=>{e.addEventListener("click",function(){commRes.forEach(e=>{e.classList.remove("active-type")}),this.classList.add("active-type"),selectedCommRes=this.innerText})}),document.getElementById("sendOTP").addEventListener("click",async function(){let e=document.getElementById("imput-ur").value;console.log(e),fetch("/send-email-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(e=>{if(!e.ok)throw Error("Error sending OTP");return e.text()}).then(e=>{console.log(e),console.log("otp sent"),document.getElementById("sendOTP").innerHTML="otp sucessfully sent",document.getElementById("otpField").style.display="block",document.getElementById("verifyOTP").style.display="block"}).catch(e=>{console.error("Error:",e),alert("Error sending OTP please ensure correct email")})}),document.getElementById("verifyOTP").addEventListener("click",async()=>{let e=document.getElementById("imput-ur").value,t=document.getElementById("imput-otpr").value;try{let n=await fetch("/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,otp:t})}),l=await n.json();if(l.success){document.getElementById("funNAme").disabled=!1,document.getElementById("verifyOTP").innerHTML="OTP Verified",document.getElementById("otpField").style.display="none",document.getElementById("sendOTP").style.display="none",document.getElementById("imput-otp").style.display="none";let s=document.getElementById("verifyOTP");setTimeout(()=>{s.style.display="none"},1e3)}else alert("Incorrect OTP. Please try again.")}catch(o){console.log(o)}});
 
